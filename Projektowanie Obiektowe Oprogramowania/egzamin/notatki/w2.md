# Wykład 2 - UML

## Wprowadzenie

UML składa się z **diagramów struktur** (statyczne elementy systemu) oraz **diagramów zachowań** (dynamiczne procesy).

Narzędzia do UML:
- Lekkie: draw.io, yuml.me, umletino
- Profesjonalne: Enterprise Architect (płatne), Visual Paradigm (darmowa wersja Community)

## Diagramy klas

Służą do reprezentacji modeli pojęciowych, klas obiektowych oraz schematów relacyjnych baz danych.

### Hierarchia modeli

#### 1. Diagram modelu pojęciowego
- Ustalanie wspólnego języka w projekcie (bez dziedziczenia i metod)
- Tylko publiczne atrybuty i relacje (asocjacje) między pojęciami

#### 2. Diagram modelu obiektowego (klas)
- Refaktoryzacja modelu pojęciowego:
  - Usuwanie zbędnych pojęć
  - Dodawanie klas pomocniczych
  - Dodawanie metod, widoczności, typów relacji (asocjacje, agregacje, kompozycje, dziedziczenie)
- Na tym etapie wszystkie relacje muszą być implementowalne w języku obiektowym

#### 3. Diagram modelu implementacyjnego (relacyjnego)
- Struktura fizyczna bazy danych:
  - Bez metod i dziedziczenia (zastępowane przez:
    - Table-per-concrete-type
    - Table-per-hierarchy
    - Table-per-type)
  - Surrogate keys (sztuczne identyfikatory)
  - Tabele pomocnicze do relacji wiele-wiele

### Formalizm klas i asocjacji

| Symbol | Znaczenie   |
|--------|-------------|
| `+`    | publiczna   |
| `-`    | prywatna    |
| `#`    | chroniona   |
| `~`    | pakietowa   |

- **Asocjacja** - Powiązanie między klasami (np. „Użytkownik ma Konto”)
- **Agregacja** - Część może istnieć bez całości (`◇`)
- **Kompozycja** - Część żyje razem z całością (`◆`)
- **Dziedziczenie** - „jest-a” – podklasa rozszerza nadklasę (`△`)
- **Realizacja** - Implementacja interfejsu przez klasę (`▻`)

### Składowe

- Atrybuty: prywatne, publiczne, protected, static, const, kolekcje, pochodne
- Metody: publiczne, prywatne, protected, internal, abstrakcyjne, statyczne, konstruktory
- Asocjacje

### Atrybut vs Asocjacja

| Cecha                  | Atrybut                    | Asocjacja                            |
|------------------------|----------------------------|--------------------------------------|
| Przechowuje wartość    | Tak                         | Tak (referencja do innej klasy)     |
| Typ                    | Prosty (np. `int`, `str`)   | Złożony (inny obiekt)               |
| Reprezentacja w UML    | Wewnątrz klasy              | Linia między klasami                |

### Dziedziczenie

- Generalizacja/specjalizacja – dziedziczenie
- Realizacja – implementacja interfejsu

## Diagramy obiektów

Migawka systemu: instancje obiektów i ich stan w danym momencie

Narzędzia:
- **Enterprise Architect** – Instance Classifier, Set Run State
- **Visual Paradigm** – Object Diagram, Add Classifier, Open Specification

## Diagramy stanów

- Reprezentują maszyny stanowe
- **Stany** – nazwane rzeczownikowo/przymiotnikowo  
- **Akcje/przejścia** – strzałki między stanami (nie nazwane)

## Diagramy czynności

Dokumentują procesy, np. przypadki użycia i algorytmy

- **Czynności** – ogólne, podzielne  
- **Akcje** – konkretne, krótkie (czasowniki)

- Diagramy te używają:
  - Strzałki jako następstwa
  - Partycji (np. aktorzy)
  - Regionów (np. przerywalne)
  - Warunków (`if`, `else`, `przerwij`)

## Diagramy sekwencji

Dokumentują przepływ komunikatów między obiektami

- **Linie życia** – obiekty
- **Komunikaty** – np. `a.fooA()`, `return value`
- Obiekty typowane:
  - `Boundary`, `Control`, `Entity`
- Ramki: `loop`, `alt`, `opt`, `neg`, `par`, `ref`, `sd`
- Diagram pokazuje chronologiczny przebieg metod

## Diagramy komponentów

Reprezentacja komponentów (modułów, pakietów) i ich 

Komponent posiada **porty**:
  - **Dostawca usługi** – udostępnia interfejs
  - **Odbiorca usługi** – korzysta z interfejsu

# Porównanie diagramów UML

| Diagram     | Typ          | Przeznaczenie                         | Kluczowe elementy                      |
|-------------|--------------|---------------------------------------|----------------------------------------|
| Klas        | Strukturalny | Struktura systemu (klasy, relacje)    | Klasy, atrybuty, metody, relacje       |
| Obiektów    | Strukturalny | Migawka systemu w danym momencie      | Obiekty, wartości atrybutów            |
| Stanów      | Behawioralny | Stany obiektu i zmiany między nimi    | Stany, akcje i przejścia (nienazwane)  |
| Czynności   | Behawioralny | Przebieg procesów, algorytmy          | Akcje (czasowniki), przepływ, partycje |
| Sekwencji   | Behawioralny | Komunikacja między obiektami w czasie | Linie życia, komunikaty, ramki         |
| Komponentów | Strukturalny | Architektura wysokiego poziomu        | Komponenty, porty, zależności          |

## Diagrams-as-code

Tekstowa reprezentacja diagramów, łatwa do wersjonowania

- Przykłady narzędzi:
  - PlantUML
  - Mermaid.js
