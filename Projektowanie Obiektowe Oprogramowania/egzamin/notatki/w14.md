# Wykład 14 - Architektura systemów 1

## 1. Architektura systemów

**Aplikacje rozległe (Enterprise Applications)** to wielomodułowe systemy informatyczne, często rozwijane przez lata, budowane w różnych technologiach i architekturach.

### Wyzwania:
- Integracja systemów – przepływ informacji oraz tożsamości użytkowników
- Wymagana interoperacyjność, czyli otwartość technologiczna (np. Krajowe Ramy Interoperacyjności)

## 2. Domain-Driven Design (DDD)

DDD to podejście skupiające się na wiernym odwzorowaniu dziedziny problemowej. 
Nie jest to ani metodyka, ani architektura – to zbiór praktyk i wskazówek.

### 2.1 Strategic Design

- **Identyfikacja domen:**
  - Domeny główne – realizujące podstawowe cele systemu
  - Domeny pomocnicze – cele dodatkowe
  - Domeny generyczne – techniczne (np. uwierzytelnianie)

- **Bounded Context:** granica, w której obowiązuje spójny język (Ubiquitous Language) dla danej domeny.

### 2.2 Tactical Design

- **Entity:** byt z unikalnym ID, którego atrybuty mogą się zmieniać
- **Value Object:** bez ID, niemodyfikowalny, porównywany przez wartości
- **Aggregate:** złożona struktura danych, z głównym obiektem (Aggregate Root)
- **Service:** bezstanowa funkcjonalność niepowiązana z konkretnym bytem

### Architektury wspierające DDD:
- **Architektura heksagonalna**
- **Mikrousługi** – Bounded Context = granica mikroserwisu

### 2.3 DDD or not DDD?

**Zalety:**
- Ułatwia projektowanie systemów z wyraźną dziedziną biznesową

**Wady:**
- Trudności w zastosowaniu w systemach technicznych
- Potrzeba dodatkowych warstw w repozytoriach, co może obniżać wydajność

## 3. Service-Oriented Architecture (SOA)

SOA to architektura klient-serwer, w której kontraktem są operacje biznesowe. Opiera się na specyfikacjach takich jak:

- **WSDL, WADL, OpenAPI**
- Języki: XML/JSON
- Protokół komunikacyjny: HTTP

**Różnica między SOA a REST:**
- REST – operuje na atomowych zasobach
- SOA – operuje na agregatach (np. użytkownik z adresem i uprawnieniami w jednej operacji)

## 4. X.509 / PKCS#12

### X.509
- Standard PKI dla certyfikatów klucza publicznego (RSA, ECC)

### PKCS#12
- Format pliku do przenoszenia par certyfikat–klucz prywatny (`.p12`, `.pfx`)

### Operacje:
- **Szyfrowanie** – za pomocą klucza publicznego
- **Podpisywanie** – za pomocą klucza prywatnego
- **Podpisywanie skrótu** – np. SHA256, aby ograniczyć rozmiar podpisu

## 5. XMLDSig / XAdES

### XMLDSig
- Standard podpisywania dokumentów XML (W3C)
- Zalety: czytelność dokumentu, możliwość kontrasygnat
- Bazuje na kryptografii asymetrycznej

### XAdES
- Rozszerzenie XMLDSig: dodaje m.in. znacznik czasu (timestamp)
- Przykład użycia: system e-Deklaracje

## 6. Single Sign-On (SSO)

### 6.1 Informacje ogólne

- Umożliwia jednokrotne logowanie do wielu systemów
- Typowe implementacje: system operacyjny, przeglądarka
- Wzorzec dla aplikacji rozległych

### Protokoły SSO:
- **OpenID Connect / OAuth2**
- **CAS**
- **SAML 2.0**
- **Shibboleth**
- **WS-Federation** (np. Office365)

### 6.2 Claims-based Authentication

- **Claim:** podpisana informacja o użytkowniku (np. imię, PESEL)
- **Zaufanie do wystawcy (Issuer)** gwarantuje akceptację claimów

### 6.3 Federalizacja

- Oświadczenia mogą być zbierane przez wielu wystawców (STS)
- Użytkownik nie musi wiedzieć, ilu wystawców brało udział
